{% from "Common/Macros.cs.jinja2" import locName %}
// Copyright (c) Strange Loop Games. All rights reserved.
// See LICENSE file in the project root for full license information.
// <auto-generated />

namespace Eco.Mods.TechTree
{
    {% block using %}
    using System.Collections.Generic;
    using Eco.Gameplay.Items;
    using Eco.Shared.Localization;
    {% endblock using %}

    {% set recipe = item %}
    {% set recipeClassName = recipe.name + "Recipe" %}
    public partial class {{ recipeClassName }}
    {
        partial void ModsPreInitialize()
        {
            var recipe = new Recipe();
            recipe.Init(
                "{{ recipe.name }}",  //noloc
                Localizer.DoStr("{{ locName(recipe) }}"),
                {% if recipe.ingredients %}
                new List<IngredientElement>
                {
                    {% for ingredient in recipe.ingredients %}
                      {% if ingredient.tag %}
                    new IngredientElement("{{ ingredient.tag }}", {{ ingredient.count | default(1) }}),
                      {% else %}
                    new IngredientElement(typeof({{ ingredient.item }}Item), {{ ingredient.count | default(1) }}),
                      {% endif %}
                    {% endfor %}
                },
                {% else %}
                this.Recipe[0].Ingredients,
                {% endif %}
                {% if recipe.products %}
                new List<CraftingElement>
                {
                    {% set products = recipe.products %}
                    {% for product in products %}
                    new CraftingElement<{{ product.itemClass or ("{0}Item".format(product.item)) }}>({{ product.count | default(1) }}),
                    {% endfor %}
                });
                {% else %}
                this.Recipe[0].Items);
                {% endif %}
            this.Recipes = new List<Recipe> { recipe };

            {% if recipe.laborInCalories %}
            this.LaborInCalories = CreateLaborInCaloriesValue({{ recipe.laborInCalories }});
            {% endif %}
            {% if recipe.craftTimeMinutes %}
            this.CraftMinutes = CreateCraftTimeValue({{ recipe.craftTimeMinutes }});
            {% endif %}
        }

        partial void ModsPostInitialize()
        {
        }
    }
}
